<div class="filter-form">
  <% if finder_presenter.show_keyword_search? and !finder_presenter.all_content_finder? %>
    <div id="keywords">
      <% label_text = capture do %>
        Search <span class="govuk-visually-hidden"><%= finder_presenter.name %></span>
      <% end %>
      <%= render "govuk_publishing_components/components/input", {
        controls: "js-search-results-info",
        id: "finder-keyword-search",
        label: {
          text: label_text
        },
        name: "keywords",
        search_icon: true,
        value: result_set_presenter.user_supplied_keywords,
      }  %>
    </div>
  <% end %>

  <div data-module="track-click" data-track-category="filterClicked"
      data-track-action="skip-Link" data-track-label="">
    <%= render "govuk_publishing_components/components/skip_link", {
      text: 'Skip to results',
      href: '#js-results'}
    %>
  </div>

  <% if finder_presenter.filters.any? %>
    <div data-module="gem-toggle" data-toggle-class="facet-toggle__content--hide" <%= "class=facet-toggle--only-on-mobile" unless finder_presenter.hide_facets_by_default %>>

      <a href="#" class="facet-toggle<%= ' app-visually-hidden-mobile' if finder_presenter.mobile_filter? %>" data-controls="facet-wrapper" data-expanded="false" data-track-category="filterClicked" data-track-action="accordion" data-toggled-text="- <%= t("finders.facet_disclosure.fewer", default: "Show fewer search options") %>">
        + <%= t("finders.facet_disclosure.more", default: "Show more search options") %>
      </a>

      <div id="facet-wrapper" class="facet-toggle__content facet-toggle__content--hide<%= ' app-!hack-hide-override-for-mobile' if finder_presenter.mobile_filter? %>" >
        <%= render finder_presenter.filters %>
      </div>
    </div>
  <% end %>

  <div id="js-filter-button-result-count" class="js-live-search-fallback button__wrapper<%= ' app-!hack-hide-override-for-mobile app-!-stick-bottom app-hack-filter-submit govuk-!-padding-left-3 govuk-!-padding-right-3' if finder_presenter.mobile_filter? %>">
    <%= render "govuk_publishing_components/components/button", {
      text: "Filter #{result_set_presenter.displayed_total}",
      margin_bottom: true
    } %>
  </div>
</div>
